<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="PSR-4의 구현 예 #  다음 예는 PSR-4에 호환하는 코드입니다.
역자주: 사실상 오토로더는 컴포저로 대동단결 되었기 때문에 직접 구현하시기 보다는 컴포저를 사용하시는 것을 추천합니다
Closure 예제 #  &lt;?php /** * An example of a project-specific implementation. * * After registering this autoload function with SPL, the following line * would cause the function to attempt to load the \Foo\Bar\Baz\Qux class * from /path/to/project/src/Baz/Qux.php: * * new \Foo\Bar\Baz\Qux; * * @param string $class The fully-qualified class name.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="" />
<meta property="og:description" content="PSR-4의 구현 예 #  다음 예는 PSR-4에 호환하는 코드입니다.
역자주: 사실상 오토로더는 컴포저로 대동단결 되었기 때문에 직접 구현하시기 보다는 컴포저를 사용하시는 것을 추천합니다
Closure 예제 #  &lt;?php /** * An example of a project-specific implementation. * * After registering this autoload function with SPL, the following line * would cause the function to attempt to load the \Foo\Bar\Baz\Qux class * from /path/to/project/src/Baz/Qux.php: * * new \Foo\Bar\Baz\Qux; * * @param string $class The fully-qualified class name." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://laonstory.github.io/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/accepted/03-psr-4/" />

<title>03 P S R 4 | Laonstory GuideBook</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.6cd8553a6854f4812343f0f0c8baca31271e686434f381fbe3c7226f66639176.css" integrity="sha256-bNhVOmhU9IEjQ/DwyLrKMSceaGQ084H748cib2ZjkXY=">
<script defer src="/en.search.min.3e383c83219ec4150ecf5a5f1b2c5854327af5ba771ae455be1680107223e7da.js" integrity="sha256-Pjg8gyGexBUOz1pfGyxYVDJ69bp3GuRVvhaAEHIj59o="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>Laonstory GuideBook</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/" class="collapsed ">개발가이드</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/" class="collapsed ">Php</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/accepted/01-psr-1/" class="">01 P S R 1</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/accepted/02-psr-3/" class="">02 P S R 3</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/accepted/03-psr-4/" class="active">03 P S R 4</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/accepted/04-psr-4/" class="">04 P S R 4</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/accepted/05-psr-6/" class="">05 P S R 6</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/accepted/06-psr-7/" class="">06 P S R 7</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/accepted/07-psr-11/" class="">07 P S R 11</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/accepted/08-psr-12/" class="">08 P S R 12</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/accepted/09-psr-13/" class="">09 P S R 13</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/accepted/10-psr-14/" class="">10 P S R 14</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/accepted/11-psr-15/" class="">11 P S R 15</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/accepted/12-psr-16/" class="">12 P S R 16</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/accepted/13-psr-17/" class="">13 P S R 17</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/php/accepted/14-psr-18/" class="">14 P S R 18</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/javascript/javascript/" class="">Javascript</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/%EA%B0%9C%EB%B0%9C%EA%B0%80%EC%9D%B4%EB%93%9C/react_jsx/react_jsx/" class="">React Jsx</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
  </ul>
  















</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>03 P S R 4</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav id="TableOfContents">
  <ul>
    <li><a href="#closure-예제">Closure 예제</a></li>
    <li><a href="#class-예제">Class 예제</a>
      <ul>
        <li><a href="#unit-tests">Unit Tests</a></li>
      </ul>
    </li>
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="psr-4의-구현-예">
  PSR-4의 구현 예
  <a class="anchor" href="#psr-4%ec%9d%98-%ea%b5%ac%ed%98%84-%ec%98%88">#</a>
</h1>
<p>다음 예는 PSR-4에 호환하는 코드입니다.</p>
<p><code>역자주: 사실상 오토로더는 컴포저로 대동단결 되었기 때문에 직접 구현하시기 보다는 컴포저를 사용하시는 것을 추천합니다</code></p>
<h2 id="closure-예제">
  Closure 예제
  <a class="anchor" href="#closure-%ec%98%88%ec%a0%9c">#</a>
</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>
<span style="color:#e6db74">/**
</span><span style="color:#e6db74"> * An example of a project-specific implementation.
</span><span style="color:#e6db74"> *
</span><span style="color:#e6db74"> * After registering this autoload function with SPL, the following line
</span><span style="color:#e6db74"> * would cause the function to attempt to load the \Foo\Bar\Baz\Qux class
</span><span style="color:#e6db74"> * from /path/to/project/src/Baz/Qux.php:
</span><span style="color:#e6db74"> *
</span><span style="color:#e6db74"> *      new \Foo\Bar\Baz\Qux;
</span><span style="color:#e6db74"> *
</span><span style="color:#e6db74"> * @param string $class The fully-qualified class name.
</span><span style="color:#e6db74"> * @return void
</span><span style="color:#e6db74"> */</span>
<span style="color:#a6e22e">spl_autoload_register</span>(<span style="color:#66d9ef">function</span> ($class) {

    <span style="color:#75715e">// project-specific namespace prefix
</span><span style="color:#75715e"></span>    $prefix <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Foo\\Bar\\&#39;</span>;

    <span style="color:#75715e">// base directory for the namespace prefix
</span><span style="color:#75715e"></span>    $base_dir <span style="color:#f92672">=</span> <span style="color:#66d9ef">__DIR__</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;/src/&#39;</span>;

    <span style="color:#75715e">// does the class use the namespace prefix?
</span><span style="color:#75715e"></span>    $len <span style="color:#f92672">=</span> <span style="color:#a6e22e">strlen</span>($prefix);
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">strncmp</span>($prefix, $class, $len) <span style="color:#f92672">!==</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#75715e">// no, move to the next registered autoloader
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span>;
    }

    <span style="color:#75715e">// get the relative class name
</span><span style="color:#75715e"></span>    $relative_class <span style="color:#f92672">=</span> <span style="color:#a6e22e">substr</span>($class, $len);

    <span style="color:#75715e">// replace the namespace prefix with the base directory, replace namespace
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// separators with directory separators in the relative class name, append
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// with .php
</span><span style="color:#75715e"></span>    $file <span style="color:#f92672">=</span> $base_dir <span style="color:#f92672">.</span> <span style="color:#a6e22e">str_replace</span>(<span style="color:#e6db74">&#39;\\&#39;</span>, <span style="color:#e6db74">&#39;/&#39;</span>, $relative_class) <span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;.php&#39;</span>;

    <span style="color:#75715e">// if the file exists, require it
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">file_exists</span>($file)) {
        <span style="color:#66d9ef">require</span> $file;
    }
});
</code></pre></div><h2 id="class-예제">
  Class 예제
  <a class="anchor" href="#class-%ec%98%88%ec%a0%9c">#</a>
</h2>
<p>다음은 네임스페이스를 활용하여 여러 클래스를 처리하기위한 클래스 구현의 예제입니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>
<span style="color:#66d9ef">namespace</span> <span style="color:#a6e22e">Example</span>;

<span style="color:#e6db74">/**
</span><span style="color:#e6db74"> * An example of a general-purpose implementation that includes the optional
</span><span style="color:#e6db74"> * functionality of allowing multiple base directories for a single namespace
</span><span style="color:#e6db74"> * prefix.
</span><span style="color:#e6db74"> *
</span><span style="color:#e6db74"> * Given a foo-bar package of classes in the file system at the following
</span><span style="color:#e6db74"> * paths ...
</span><span style="color:#e6db74"> *
</span><span style="color:#e6db74"> *     /path/to/packages/foo-bar/
</span><span style="color:#e6db74"> *         src/
</span><span style="color:#e6db74"> *             Baz.php             # Foo\Bar\Baz
</span><span style="color:#e6db74"> *             Qux/
</span><span style="color:#e6db74"> *                 Quux.php        # Foo\Bar\Qux\Quux
</span><span style="color:#e6db74"> *         tests/
</span><span style="color:#e6db74"> *             BazTest.php         # Foo\Bar\BazTest
</span><span style="color:#e6db74"> *             Qux/
</span><span style="color:#e6db74"> *                 QuuxTest.php    # Foo\Bar\Qux\QuuxTest
</span><span style="color:#e6db74"> *
</span><span style="color:#e6db74"> * ... add the path to the class files for the \Foo\Bar\ namespace prefix
</span><span style="color:#e6db74"> * as follows:
</span><span style="color:#e6db74"> *
</span><span style="color:#e6db74"> *      &lt;?php
</span><span style="color:#e6db74"> *      // instantiate the loader
</span><span style="color:#e6db74"> *      $loader = new \Example\Psr4AutoloaderClass;
</span><span style="color:#e6db74"> *
</span><span style="color:#e6db74"> *      // register the autoloader
</span><span style="color:#e6db74"> *      $loader-&gt;register();
</span><span style="color:#e6db74"> *
</span><span style="color:#e6db74"> *      // register the base directories for the namespace prefix
</span><span style="color:#e6db74"> *      $loader-&gt;addNamespace(&#39;Foo\Bar&#39;, &#39;/path/to/packages/foo-bar/src&#39;);
</span><span style="color:#e6db74"> *      $loader-&gt;addNamespace(&#39;Foo\Bar&#39;, &#39;/path/to/packages/foo-bar/tests&#39;);
</span><span style="color:#e6db74"> *
</span><span style="color:#e6db74"> * The following line would cause the autoloader to attempt to load the
</span><span style="color:#e6db74"> * \Foo\Bar\Qux\Quux class from /path/to/packages/foo-bar/src/Qux/Quux.php:
</span><span style="color:#e6db74"> *
</span><span style="color:#e6db74"> *      &lt;?php
</span><span style="color:#e6db74"> *      new \Foo\Bar\Qux\Quux;
</span><span style="color:#e6db74"> *
</span><span style="color:#e6db74"> * The following line would cause the autoloader to attempt to load the
</span><span style="color:#e6db74"> * \Foo\Bar\Qux\QuuxTest class from /path/to/packages/foo-bar/tests/Qux/QuuxTest.php:
</span><span style="color:#e6db74"> *
</span><span style="color:#e6db74"> *      &lt;?php
</span><span style="color:#e6db74"> *      new \Foo\Bar\Qux\QuuxTest;
</span><span style="color:#e6db74"> */</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Psr4AutoloaderClass</span>
{
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * An associative array where the key is a namespace prefix and the value
</span><span style="color:#e6db74">     * is an array of base directories for classes in that namespace.
</span><span style="color:#e6db74">     *
</span><span style="color:#e6db74">     * @var array
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">protected</span> $prefixes <span style="color:#f92672">=</span> <span style="color:#66d9ef">array</span>();

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Register loader with SPL autoloader stack.
</span><span style="color:#e6db74">     *
</span><span style="color:#e6db74">     * @return void
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">register</span>()
    {
        <span style="color:#a6e22e">spl_autoload_register</span>(<span style="color:#66d9ef">array</span>($this, <span style="color:#e6db74">&#39;loadClass&#39;</span>));
    }

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Adds a base directory for a namespace prefix.
</span><span style="color:#e6db74">     *
</span><span style="color:#e6db74">     * @param string $prefix The namespace prefix.
</span><span style="color:#e6db74">     * @param string $base_dir A base directory for class files in the
</span><span style="color:#e6db74">     * namespace.
</span><span style="color:#e6db74">     * @param bool $prepend If true, prepend the base directory to the stack
</span><span style="color:#e6db74">     * instead of appending it; this causes it to be searched first rather
</span><span style="color:#e6db74">     * than last.
</span><span style="color:#e6db74">     * @return void
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">addNamespace</span>($prefix, $base_dir, $prepend <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>)
    {
        <span style="color:#75715e">// normalize namespace prefix
</span><span style="color:#75715e"></span>        $prefix <span style="color:#f92672">=</span> <span style="color:#a6e22e">trim</span>($prefix, <span style="color:#e6db74">&#39;\\&#39;</span>) <span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;\\&#39;</span>;

        <span style="color:#75715e">// normalize the base directory with a trailing separator
</span><span style="color:#75715e"></span>        $base_dir <span style="color:#f92672">=</span> <span style="color:#a6e22e">rtrim</span>($base_dir, <span style="color:#a6e22e">DIRECTORY_SEPARATOR</span>) <span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;/&#39;</span>;

        <span style="color:#75715e">// initialize the namespace prefix array
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isset</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">prefixes</span>[$prefix]) <span style="color:#f92672">===</span> <span style="color:#66d9ef">false</span>) {
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">prefixes</span>[$prefix] <span style="color:#f92672">=</span> <span style="color:#66d9ef">array</span>();
        }

        <span style="color:#75715e">// retain the base directory for the namespace prefix
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> ($prepend) {
            <span style="color:#a6e22e">array_unshift</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">prefixes</span>[$prefix], $base_dir);
        } <span style="color:#66d9ef">else</span> {
            <span style="color:#a6e22e">array_push</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">prefixes</span>[$prefix], $base_dir);
        }
    }

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Loads the class file for a given class name.
</span><span style="color:#e6db74">     *
</span><span style="color:#e6db74">     * @param string $class The fully-qualified class name.
</span><span style="color:#e6db74">     * @return mixed The mapped file name on success, or boolean false on
</span><span style="color:#e6db74">     * failure.
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">loadClass</span>($class)
    {
        <span style="color:#75715e">// the current namespace prefix
</span><span style="color:#75715e"></span>        $prefix <span style="color:#f92672">=</span> $class;

        <span style="color:#75715e">// work backwards through the namespace names of the fully-qualified
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// class name to find a mapped file name
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">false</span> <span style="color:#f92672">!==</span> $pos <span style="color:#f92672">=</span> <span style="color:#a6e22e">strrpos</span>($prefix, <span style="color:#e6db74">&#39;\\&#39;</span>)) {

            <span style="color:#75715e">// retain the trailing namespace separator in the prefix
</span><span style="color:#75715e"></span>            $prefix <span style="color:#f92672">=</span> <span style="color:#a6e22e">substr</span>($class, <span style="color:#ae81ff">0</span>, $pos <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);

            <span style="color:#75715e">// the rest is the relative class name
</span><span style="color:#75715e"></span>            $relative_class <span style="color:#f92672">=</span> <span style="color:#a6e22e">substr</span>($class, $pos <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);

            <span style="color:#75715e">// try to load a mapped file for the prefix and relative class
</span><span style="color:#75715e"></span>            $mapped_file <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loadMappedFile</span>($prefix, $relative_class);
            <span style="color:#66d9ef">if</span> ($mapped_file) {
                <span style="color:#66d9ef">return</span> $mapped_file;
            }

            <span style="color:#75715e">// remove the trailing namespace separator for the next iteration
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// of strrpos()
</span><span style="color:#75715e"></span>            $prefix <span style="color:#f92672">=</span> <span style="color:#a6e22e">rtrim</span>($prefix, <span style="color:#e6db74">&#39;\\&#39;</span>);
        }

        <span style="color:#75715e">// never found a mapped file
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
    }

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Load the mapped file for a namespace prefix and relative class.
</span><span style="color:#e6db74">     *
</span><span style="color:#e6db74">     * @param string $prefix The namespace prefix.
</span><span style="color:#e6db74">     * @param string $relative_class The relative class name.
</span><span style="color:#e6db74">     * @return mixed Boolean false if no mapped file can be loaded, or the
</span><span style="color:#e6db74">     * name of the mapped file that was loaded.
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">loadMappedFile</span>($prefix, $relative_class)
    {
        <span style="color:#75715e">// are there any base directories for this namespace prefix?
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isset</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">prefixes</span>[$prefix]) <span style="color:#f92672">===</span> <span style="color:#66d9ef">false</span>) {
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
        }

        <span style="color:#75715e">// look through base directories for this namespace prefix
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">foreach</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">prefixes</span>[$prefix] <span style="color:#66d9ef">as</span> $base_dir) {

            <span style="color:#75715e">// replace the namespace prefix with the base directory,
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// replace namespace separators with directory separators
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// in the relative class name, append with .php
</span><span style="color:#75715e"></span>            $file <span style="color:#f92672">=</span> $base_dir
                  <span style="color:#f92672">.</span> <span style="color:#a6e22e">str_replace</span>(<span style="color:#e6db74">&#39;\\&#39;</span>, <span style="color:#e6db74">&#39;/&#39;</span>, $relative_class)
                  <span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;.php&#39;</span>;

            <span style="color:#75715e">// if the mapped file exists, require it
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">requireFile</span>($file)) {
                <span style="color:#75715e">// yes, we&#39;re done
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span> $file;
            }
        }

        <span style="color:#75715e">// never found it
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
    }

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * If a file exists, require it from the file system.
</span><span style="color:#e6db74">     *
</span><span style="color:#e6db74">     * @param string $file The file to require.
</span><span style="color:#e6db74">     * @return bool True if the file exists, false if not.
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">requireFile</span>($file)
    {
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">file_exists</span>($file)) {
            <span style="color:#66d9ef">require</span> $file;
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
        }
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
    }
}
</code></pre></div><h3 id="unit-tests">
  Unit Tests
  <a class="anchor" href="#unit-tests">#</a>
</h3>
<p>다음 예제는 위의 클래스 로더를 단위 테스트하는 방법의 한 가지입니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>
<span style="color:#66d9ef">namespace</span> <span style="color:#a6e22e">Example\Tests</span>;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MockPsr4AutoloaderClass</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Psr4AutoloaderClass</span>
{
    <span style="color:#66d9ef">protected</span> $files <span style="color:#f92672">=</span> <span style="color:#66d9ef">array</span>();

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">setFiles</span>(<span style="color:#66d9ef">array</span> $files)
    {
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">files</span> <span style="color:#f92672">=</span> $files;
    }

    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">requireFile</span>($file)
    {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">in_array</span>($file, $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">files</span>);
    }
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Psr4AutoloaderClassTest</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">\PHPUnit_Framework_TestCase</span>
{
    <span style="color:#66d9ef">protected</span> $loader;

    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">setUp</span>()
    {
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loader</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">MockPsr4AutoloaderClass</span>;

        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loader</span><span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">setFiles</span>(<span style="color:#66d9ef">array</span>(
            <span style="color:#e6db74">&#39;/vendor/foo.bar/src/ClassName.php&#39;</span>,
            <span style="color:#e6db74">&#39;/vendor/foo.bar/src/DoomClassName.php&#39;</span>,
            <span style="color:#e6db74">&#39;/vendor/foo.bar/tests/ClassNameTest.php&#39;</span>,
            <span style="color:#e6db74">&#39;/vendor/foo.bardoom/src/ClassName.php&#39;</span>,
            <span style="color:#e6db74">&#39;/vendor/foo.bar.baz.dib/src/ClassName.php&#39;</span>,
            <span style="color:#e6db74">&#39;/vendor/foo.bar.baz.dib.zim.gir/src/ClassName.php&#39;</span>,
        ));

        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loader</span><span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">addNamespace</span>(
            <span style="color:#e6db74">&#39;Foo\Bar&#39;</span>,
            <span style="color:#e6db74">&#39;/vendor/foo.bar/src&#39;</span>
        );

        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loader</span><span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">addNamespace</span>(
            <span style="color:#e6db74">&#39;Foo\Bar&#39;</span>,
            <span style="color:#e6db74">&#39;/vendor/foo.bar/tests&#39;</span>
        );

        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loader</span><span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">addNamespace</span>(
            <span style="color:#e6db74">&#39;Foo\BarDoom&#39;</span>,
            <span style="color:#e6db74">&#39;/vendor/foo.bardoom/src&#39;</span>
        );

        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loader</span><span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">addNamespace</span>(
            <span style="color:#e6db74">&#39;Foo\Bar\Baz\Dib&#39;</span>,
            <span style="color:#e6db74">&#39;/vendor/foo.bar.baz.dib/src&#39;</span>
        );

        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loader</span><span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">addNamespace</span>(
            <span style="color:#e6db74">&#39;Foo\Bar\Baz\Dib\Zim\Gir&#39;</span>,
            <span style="color:#e6db74">&#39;/vendor/foo.bar.baz.dib.zim.gir/src&#39;</span>
        );
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">testExistingFile</span>()
    {
        $actual <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loader</span><span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loadClass</span>(<span style="color:#e6db74">&#39;Foo\Bar\ClassName&#39;</span>);
        $expect <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/vendor/foo.bar/src/ClassName.php&#39;</span>;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">assertSame</span>($expect, $actual);

        $actual <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loader</span><span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loadClass</span>(<span style="color:#e6db74">&#39;Foo\Bar\ClassNameTest&#39;</span>);
        $expect <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/vendor/foo.bar/tests/ClassNameTest.php&#39;</span>;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">assertSame</span>($expect, $actual);
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">testMissingFile</span>()
    {
        $actual <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loader</span><span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loadClass</span>(<span style="color:#e6db74">&#39;No_Vendor\No_Package\NoClass&#39;</span>);
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">assertFalse</span>($actual);
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">testDeepFile</span>()
    {
        $actual <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loader</span><span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loadClass</span>(<span style="color:#e6db74">&#39;Foo\Bar\Baz\Dib\Zim\Gir\ClassName&#39;</span>);
        $expect <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/vendor/foo.bar.baz.dib.zim.gir/src/ClassName.php&#39;</span>;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">assertSame</span>($expect, $actual);
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">testConfusion</span>()
    {
        $actual <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loader</span><span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loadClass</span>(<span style="color:#e6db74">&#39;Foo\Bar\DoomClassName&#39;</span>);
        $expect <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/vendor/foo.bar/src/DoomClassName.php&#39;</span>;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">assertSame</span>($expect, $actual);

        $actual <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loader</span><span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">loadClass</span>(<span style="color:#e6db74">&#39;Foo\BarDoom\ClassName&#39;</span>);
        $expect <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/vendor/foo.bardoom/src/ClassName.php&#39;</span>;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">assertSame</span>($expect, $actual);
    }
}
</code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#closure-예제">Closure 예제</a></li>
    <li><a href="#class-예제">Class 예제</a>
      <ul>
        <li><a href="#unit-tests">Unit Tests</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












